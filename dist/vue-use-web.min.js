!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@vue/composition-api")):"function"==typeof define&&define.amd?define(["exports","@vue/composition-api"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).VueUseWeb={},e.vueCompositionApi)}(this,function(e,w){"use strict";var r=["chargingchange","chargingtimechange","dischargingtimechange","levelchange"];var g=function(){return(g=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function u(e,u,a,c){return new(a=a||Promise)(function(t,n){function o(e){try{r(c.next(e))}catch(e){n(e)}}function i(e){try{r(c.throw(e))}catch(e){n(e)}}function r(e){var n;e.done?t(e.value):((n=e.value)instanceof a?n:new a(function(e){e(n)})).then(o,i)}r((c=c.apply(e,u||[])).next())})}function a(t,o){var i,r,u,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:n(0),throw:n(1),return:n(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(u=2&n[0]?r.return:n[0]?r.throw||((u=r.return)&&u.call(r),0):r.next)&&!(u=u.call(r,n[1])).done)return u;switch(r=0,u&&(n=[2&n[0],u.value]),n[0]){case 0:case 1:u=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(u=0<(u=a.trys).length&&u[u.length-1])&&(6===n[0]||2===n[0])){a=0;continue}if(3===n[0]&&(!u||n[1]>u[0]&&n[1]<u[3])){a.label=n[1];break}if(6===n[0]&&a.label<u[1]){a.label=u[1],u=n;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(n);break}u[2]&&a.ops.pop(),a.trys.pop();continue}n=o.call(t,a)}catch(e){n=[6,e],r=0}finally{i=u=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}}function c(t,o){return 0===t?o:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];clearTimeout(i),i=setTimeout(function(){i=void 0,o.apply(void 0,e)},t)};var i}var l="undefined"!=typeof window;function t(e,n,t,o){w.onMounted(function(){(w.isRef(e)?e.value:e).addEventListener(n,t,o)}),w.onBeforeUnmount(function(){(w.isRef(e)?e.value:e).removeEventListener(n,t,o)})}function v(n){var t=null;try{t=JSON.parse(n)}catch(e){t=n}return t}function o(e){var n;"undefined"!=typeof window&&(n=window.matchMedia(e));var t=w.ref(!!n&&n.matches);function o(e){t.value=e.matches}return w.onMounted(function(){n=n||window.matchMedia(e),t.value=n.matches,n.addListener(o)}),w.onUnmounted(function(){n.removeListener(o)}),t}var f={onClick:null,onShow:null,onError:null,onClose:null};e.useBattery=function(){var e=w.ref(!1),n=w.ref(0),t=w.ref(0),o=w.ref(1);function i(){e.value=this.charging,n.value=this.chargingTime||0,t.value=this.dischargingTime||0,o.value=this.level}return w.onMounted(function(){"getBattery"in navigator&&navigator.getBattery().then(function(n){i.call(n),r.forEach(function(e){n.addEventListener(e,i)})})}),w.onUnmounted(function(){"getBattery"in navigator&&navigator.getBattery().then(function(n){r.forEach(function(e){n.removeEventListener(e,i)})})}),{isCharging:e,chargingTime:n,dischargingTime:t,level:o}},e.useClipboard=function(){var t=w.ref("");function e(){return u(this,void 0,void 0,function(){var n;return a(this,function(e){switch(e.label){case 0:return n=t,[4,navigator.clipboard.readText()];case 1:return n.value=e.sent(),[2]}})})}return w.onMounted(function(){window.addEventListener("copy",e)}),w.onUnmounted(function(){window.removeEventListener("copy",e)}),{text:t,write:function(e){return t.value=e,navigator.clipboard.writeText(e)}}},e.useDeviceLight=function(){var n=w.ref(null);function e(e){n.value=e.value}return w.onMounted(function(){window.addEventListener("devicelight",e)}),w.onUnmounted(function(){window.removeEventListener("devicelight",e)}),{value:n}},e.useDeviceMedia=function(e){var n=w.ref(null),t=w.ref(null);return w.onMounted(function(){navigator.mediaDevices.getUserMedia(e).then(function(e){return n.value=e}).catch(function(e){t.value=e})}),{stream:n,error:t}},e.useDeviceMotion=function(e){void 0===e&&(e={throttleMs:10});var n=w.ref({x:null,y:null,z:null}),t=w.ref({alpha:null,beta:null,gamma:null}),o=w.ref(0),i=w.ref({x:null,y:null,z:null});function r(e){n.value=e.acceleration,i.value=e.accelerationIncludingGravity,t.value=e.rotationRate,o.value=e.interval}var u=e.throttleMs?c(e.throttleMs,r):r;return w.onMounted(function(){window.addEventListener("devicemotion",u,!1)}),w.onUnmounted(function(){window.removeEventListener("devicemotion",u,!1)}),{acceleration:n,accelerationIncludingGravity:i,rotationRate:t,interval:o}},e.useDeviceOrientation=function(){var n=w.ref(!1),t=w.ref(0),o=w.ref(0),i=w.ref(0);function e(e){n.value=e.absolute,t.value=e.alpha,o.value=e.beta,i.value=e.gamma}return w.onMounted(function(){window.addEventListener("deviceorientation",e)}),w.onUnmounted(function(){window.removeEventListener("deviceorientation",e)}),{isAbsolute:n,alpha:t,beta:o,gamma:i}},e.useDocumentVisibility=function(){function e(){return"visible"===document.visibilityState}var n=w.ref(!l||e());return t(document,"visibilitychange",function(){n.value=e()}),n},e.useEventListener=t,e.useFetch=function(e,n){var t,o,i=w.ref(null),r=w.ref(!1),u=w.ref(!1),a=w.ref(!1),c=w.ref(!1),l=w.ref("unknown"),v=w.ref(void 0),f=w.ref(""),s=w.ref({});function d(){return r.value=!0,window.fetch(e,g({signal:t},n)).then(function(e){var n,t;u.value=e.ok,a.value=!e.ok,r.value=!1,f.value=e.statusText,v.value=e.status,l.value=e.type;var o={};return e.headers.forEach(function(e,n){o[n]=e}),s.value=o,"application/json"===(null===(n=e.headers.get("content-type"))||void 0===n?void 0:n.slice(0,null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.indexOf(";")))?e.json():e.text()}).then(function(e){c.value||(i.value=e)}).catch(function(){a.value=!0,r.value=!1})}return"undefined"!=typeof AbortController&&(o=new AbortController,t=o.signal),w.onMounted(d),{response:i,status:v,statusText:f,headers:s,isLoading:r,cancelled:c,error:a,success:u,cancel:function(){u.value||(c.value=!0,o&&o.abort())},execute:d}},e.useFullscreen=function(e){var n=w.ref(!1);function t(){document.fullscreenElement&&document.exitFullscreen(),n.value=!1}return{isFullscreen:n,enterFullscreen:function(){t(),e.value.requestFullscreen().then(function(){n.value=!0})},exitFullscreen:t}},e.useGeolocation=function(e){var n,t=w.ref(null),o=w.ref(""),i=w.ref({accuracy:0,latitude:0,longitude:0,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function r(e){t.value=e.timestamp,i.value=e.coords,o.value=""}return w.onMounted(function(){"geolocation"in navigator&&(n=window.navigator.geolocation.watchPosition(r,void 0,e))}),w.onUnmounted(function(){n&&window.navigator.geolocation.clearWatch(n)}),{coords:i,locatedAt:t,error:o}},e.useHardwareConcurrency=function(){var n=w.ref(0),t=w.ref(!1);return function e(){l||w.onMounted(e),"hardwareConcurrency"in window.navigator&&(n.value=window.navigator.hardwareConcurrency),t.value=!0}(),{logicalProcessors:n,unsupported:t}},e.useIntersectionObserver=function(e,n){void 0===n&&(n={root:null,rootMargin:"0px"});var t,o=w.ref(0),i=w.ref(!1),r=w.ref(!1);function u(){e.value&&t.observe(e.value)}function a(){t&&e.value&&t.unobserve(e.value)}return w.onMounted(function(){t=new IntersectionObserver(function(e){var n=e[0];if(o.value=n.intersectionRatio,0<n.intersectionRatio)return i.value=!0,void(r.value=1<=n.intersectionRatio);i.value=!1},n),u()}),w.onUnmounted(a),{intersectionRatio:o,isIntersecting:i,isFullyInView:r,observe:u,unobserve:a}},e.useLocalStorage=function(n,t){function e(){var e=localStorage.getItem(n);o.value=null===e?t:v(e)}var o=w.ref(null),i=!1;function r(e){e.key===n&&(o.value=e.newValue?v(e.newValue):null)}return"undefined"!=typeof window&&(e(),i=!0),w.onMounted(function(){i||e(),window.addEventListener("storage",r,!0)}),w.onUnmounted(function(){localStorage.setItem(n,JSON.stringify(o.value)),window.removeEventListener("storage",r)}),{value:o}},e.useMedia=o,e.useMemoryStatus=function(){var t=w.ref(0),o=w.ref(!1),i=w.ref(void 0),r=w.ref(void 0),u=w.ref(void 0);return function e(){var n;l||w.onMounted(e),"deviceMemory"in window.navigator?(t.value=window.navigator.deviceMemory,"memory"in window.performance&&(n=window.performance.memory,i.value=n.totalJSHeapSize,r.value=null==n?void 0:n.usedJSHeapSize,u.value=null==n?void 0:n.jsHeapSizeLimit)):o.value=!0}(),{deviceMemory:t,unsupported:o}},e.useMousePosition=function(){var n=w.ref(0),t=w.ref(0);function e(e){n.value=e.clientX,t.value=e.clientY}return w.onMounted(function(){window.addEventListener("mousemove",e,!1)}),w.onUnmounted(function(){window.removeEventListener("mousemove",e,!1)}),{x:n,y:t}},e.useNetwork=function(){var e=w.ref(!0),n=w.ref(!1),t=w.ref(void 0),o=w.ref(void 0),i=w.ref(void 0),r=w.ref(void 0),u=w.ref("unknown");function a(){e.value=window.navigator.onLine,t.value=e.value?void 0:Date.now(),"connection"in window.navigator&&(o.value=window.navigator.connection.downlink,i.value=window.navigator.connection.downlinkMax,r.value=window.navigator.connection.effectiveType,n.value=window.navigator.connection.saveData,u.value=window.navigator.connection.type)}function c(){e.value=!1,t.value=Date.now()}function l(){e.value=!0}return w.onMounted(function(){a(),window.addEventListener("offline",c),window.addEventListener("online",l),"connection"in window.navigator&&window.navigator.connection.addEventListener("change",a,!1)}),w.onUnmounted(function(){window.removeEventListener("offline",c),window.removeEventListener("online",l),"connection"in window.navigator&&window.navigator.connection.removeEventListener("change",a,!1)}),{isOnline:e,saveData:n,offlineAt:t,downlink:o,downlinkMax:i,effectiveType:r,type:u}},e.useNotification=function(e,n,t){var o=this;void 0===n&&(n={}),void 0===t&&(t=f);var i=w.ref(null);return w.onMounted(function(){return u(o,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return"permission"in Notification&&"denied"!==Notification.permission?[4,Notification.requestPermission()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}),w.onUnmounted(function(){i.value=null}),{showNotifcation:function(){i.value=new Notification(e,n),i.value.onclick=t.onClick,i.value.onshow=t.onShow,i.value.onerror=t.onError,i.value.onclose=t.onClose}}},e.usePreferredColorScheme=function(){var e="(prefers-color-scheme: light)",n=o("(prefers-color-scheme: dark)"),t=o(e);return w.computed(function(){return n.value?"dark":t.value?"light":"no-preference"})},e.usePreferredLanguages=function(){var e=w.ref(navigator.languages);function n(){e.value=navigator.languages}return w.onMounted(function(){window.addEventListener("languagechange",n)}),w.onUnmounted(function(){window.removeEventListener("languagechange",n)}),e},e.useScript=function(o){var i=w.ref(!1),r=w.ref(!1),u=w.ref(!1),e=new Promise(function(n,t){w.onMounted(function(){var e=document.createElement("script");e.onload=function(){i.value=!1,u.value=!0,r.value=!1,n()},e.onerror=function(e){i.value=!1,u.value=!1,r.value=!0,t(e)},e.src=o.src,document.head.appendChild(e)})});return{isLoading:i,error:r,success:u,toPromise:function(){return e}}},e.useWebSocket=function(e){var t,n=w.ref(null),o=w.ref("CONNECTING");return w.onMounted(function(){(t=new WebSocket(e)).onopen=function(){o.value="OPEN"},t.onclose=t.onerror=function(){o.value="CLOSED"},t.onmessage=function(e){n.value=e.data}}),w.onUnmounted(function(){t.close()}),{data:n,state:o,close:function(e,n){t&&t.close(e,n)},send:function(e){t&&t.send(e)}}},e.useWindowScrollPosition=function(e){void 0===e&&(e={throttleMs:100});var n=w.ref(0),t=w.ref(0);function o(){n.value=window.pageXOffset,t.value=window.pageYOffset}var i=c(e.throttleMs,o);return w.onBeforeMount(function(){o()}),w.onMounted(function(){window.addEventListener("scroll",i,{passive:!0})}),w.onUnmounted(function(){window.removeEventListener("scroll",i)}),{x:n,y:t}},e.useWindowSize=function(e){void 0===e&&(e={throttleMs:100});var n=w.ref(0),t=w.ref(0);function o(){n.value=window.innerWidth,t.value=window.innerHeight}var i=c(e.throttleMs,o);return w.onBeforeMount(function(){o()}),w.onMounted(function(){window.addEventListener("resize",i,{passive:!0})}),w.onUnmounted(function(){window.removeEventListener("resize",i)}),{height:t,width:n}},e.useWorker=function(e){var n,t=w.ref(null);return w.onMounted(function(){(n=new Worker(e)).onmessage=function(e){t.value=e.data}}),w.onUnmounted(function(){n.terminate()}),{data:t,post:function(e){n&&n.postMessage(e)},terminate:function(){n&&n.terminate()}}},Object.defineProperty(e,"__esModule",{value:!0})});